#
# Variation schema for the Bookworms demo application.
#
name: bookworms
description: Variant experiment schema for the Bookworms demo application
flusher:
  class: com.variant.spi.stdlib.flush.TraceEventFlusherCsv
hooks:
  - class: com.variant.demo.bookworms.spi.UserTargetingHook

states:
  - name: Home
  - name: BookDetails
  - name: Checkout

variations:

  # A/B Test of adding suggestions to the checkout page. Default random targeting,
  # unless user is "WithSuggestions" who is always targeted to the WithSuggestions
  # experience as a matter of demonstrating targeting hook.
  - name: FreeShippingExp
    experiences:
      - name: Nada
        isControl: true
      - name: On50
        parameters:
          amount: 50
      - name: On100
        parameters:
          amount: 100
    onStates:
      - state: Home
      - state: BookDetails
      - state: Checkout

  # Feature Flag gating access to the reputation feature on the book detail
  # and the checkout pages. ReputationQualificationHook will only allow user
  # "WithReputation" into the feature.
  - name: ReputationFF
    concurrentVariations: [Suggestions]
    experiences:
      - name: NoReputation
        isControl: true
      - name: WithReputation
    onStates:
    - state: BookDetails
    - state: Checkout