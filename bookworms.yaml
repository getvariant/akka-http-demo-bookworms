#
# Variation schema for the Bookworms demo application.
#
name: bookworms
description: Variant experiment schema for the Bookworms demo application
flusher:
  class: com.variant.spi.stdlib.flush.TraceEventFlusherCsv

states:
  - name: Home
  - name: BookDetails
  - name: Checkout

variations:

  # Testing offers of free shipping to low-engagement customers with multiple
  # minimal order thresholds.
  - name: FreeShippingExp
    experiences:
      - name: Nada
        isControl: true
      - name: On50
        parameters:
          threshold: 50
      - name: On100
        parameters:
          threshold: 100
    onStates:
      - state: Home
      - state: BookDetails
      - state: Checkout
    durability:
      qualification: state
    hooks:
      - class: com.variant.demo.bookworms.spi.FreeShippingExpQualificationHook

  # Feature Flag gating access to the reputation feature on the book detail
  # and the checkout pages. ReputationQualificationHook will only allow user
  # "WithReputation" into the feature.
  - name: ReputationFF
    concurrentVariations: [FreeShippingExp]
    experiences:
      - name: WithReputation
        isControl: true
    onStates:
      - state: BookDetails
      - state: Checkout
    hooks:
      - class: com.variant.demo.bookworms.spi.ReputationFFQualificationHook
